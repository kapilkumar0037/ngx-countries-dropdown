<div class="ipv_dropdown" (click)="$event.stopPropagation()">
    <div class="ipv_selected-item" role="combobox" tabindex="0" title="{{selectedCountry.name}}" (click)="toggleList()">
        <ng-container *ngIf="selectedCountry?.name">
            <div *ngIf="!selectedCountryConfig.hideFlag" class="ipv_flag ipv_{{selectedCountry.code?.toLowerCase()}}"></div>
            <div>
                <span *ngIf="!selectedCountryConfig.hideCode" class="ipv_code-box">{{selectedCountry.code}}</span>
                <span *ngIf="!selectedCountryConfig.hideName" class="ipv_country-name">{{selectedCountry.name}}</span>
                <span *ngIf="!selectedCountryConfig.hideDialCode" class="ipv_country-name">{{selectedCountry.dialling_code}}</span>
                <span *ngIf="selectedCountryConfig.displayCurrencySymbol" class="ipv_country-name">{{selectedCountry.currency?.symbol}}</span>                
                <span *ngIf="selectedCountryConfig.displayCurrencyCode" class="ipv_country-name">{{selectedCountry.currency?.code}}</span>
                <span *ngIf="selectedCountryConfig.displayCurrencyName" class="ipv_country-name">{{selectedCountry.currency?.name}}</span>
                <span *ngIf="selectedCountryConfig.displayLanguageCode" class="ipv_country-name">{{selectedCountry.language?.code?.toUpperCase()}}</span>
                <span *ngIf="selectedCountryConfig.displayLanguageName" class="ipv_country-name">{{selectedCountry.language?.name}}</span>
            </div>
        </ng-container>
        <ng-container *ngIf="!selectedCountry?.name">
            <div><span >Select country</span></div>
        </ng-container>
        <div class="ipv_arrow"></div>
    </div>
    <div [ngClass]="{'ipv_hide': !displayList}">

        <ul class="ipv_country-list" role="listbox" aria-label="List of countries">
            <li class="searchBox">
                <input placeholder="Search" [(ngModel)]="searchText" (ngModelChange)="search()" />
            </li>
            <li class="ipv_country" tabindex="-1" *ngFor="let prefCountry of preferredCountryList" role="option"
                (click)="changeCountry(prefCountry)"
                [ngClass]="{'ipv_highlight': prefCountry.code === selectedCountry.code}">

                <div class="ipv_flag-box" *ngIf="!countryListConfig.hideFlag">
                    <div class="ipv_flag ipv_{{prefCountry.code?.toLowerCase()}}"></div>
                </div>
                <span *ngIf="!countryListConfig.hideCode" class="ipv_code-box">{{prefCountry?.code}}</span>
                <span *ngIf="!countryListConfig.hideName" class="ipv_country-name">{{prefCountry.name}}</span>
                <span *ngIf="!countryListConfig.hideDialCode" class="ipv_dial-code">{{prefCountry.dialling_code}}</span>
                <span *ngIf="countryListConfig.displayCurrencySymbol" class="ipv_country-name">{{prefCountry.currency?.symbol}}</span>                
                <span *ngIf="countryListConfig.displayCurrencyCode" class="ipv_country-name">{{prefCountry.currency?.code}}</span>
                <span *ngIf="countryListConfig.displayCurrencyName" class="ipv_country-name">{{prefCountry.currency?.name}}</span>
                <span *ngIf="countryListConfig.displayLanguageCode" class="ipv_country-name">{{prefCountry.language?.code?.toUpperCase()}}</span>
                <span *ngIf="countryListConfig.displayLanguageName" class="ipv_country-name">{{prefCountry.language?.name}}</span>
           
            </li>
            <li class="ipv_divider" role="separator" aria-disabled="true"></li>
            <li class="ipv_country " [ngClass]="{'ipv_highlight': country.code === selectedCountry.code}" tabindex="-1"
                *ngFor="let country of filteredCountries" role="option" (click)="changeCountry(country)">
                <div class="ipv_flag-box" *ngIf="!countryListConfig.hideFlag">
                    <div class="ipv_flag ipv_{{country.code?.toLowerCase()}}"></div>
                </div>
                <span *ngIf="!countryListConfig.hideCode" class="ipv_code-box">{{country?.code}}</span>
                <span *ngIf="!countryListConfig.hideName" class="ipv_country-name">{{country.name}}</span>
                <span *ngIf="!countryListConfig.hideDialCode" class="ipv_dial-code">{{ country.dialling_code}}</span>
                <span *ngIf="countryListConfig.displayCurrencySymbol" class="ipv_country-name">{{country.currency?.symbol}}</span>                
                <span *ngIf="countryListConfig.displayCurrencyCode" class="ipv_country-name">{{country.currency?.code}}</span>
                <span *ngIf="countryListConfig.displayCurrencyName" class="ipv_country-name">{{country.currency?.name}}</span>
                <span *ngIf="countryListConfig.displayLanguageCode" class="ipv_country-name">{{country.language?.code?.toUpperCase()}}</span>
                <span *ngIf="countryListConfig.displayLanguageName" class="ipv_country-name">{{country.language?.name}}</span>
           
            </li>
        </ul>
    </div>

</div>